class Handler { void handle(); ... 

 class X {
   private final CopyOnWriteArraySet handlers
     = new CopyOnWriteArraySet();
   public void addHandler(Handler h) { handlers.add(h); }

   private long internalState;
   private synchronized void changeState() { internalState = ...; }

   public void update() {
     changeState();
     for (Handler handler : handlers)
       handler.handle();
   }
 }}